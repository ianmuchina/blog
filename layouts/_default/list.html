<!-- prettier-ignore -->
{{ partial "header.html" . }}

{{ partial "content-page.html" . }}

{{- $.Scratch.Set "pagecount" 0 -}}

{{ $paginate := .Paginate .Pages }}
{{ range $paginate.Pages }}

	{{- $.Scratch.Set "pagecount" (add ($.Scratch.Get "pagecount") 1) -}}

	{{ if or 
		( ne ( $.Scratch.Get "pubDate" ) ( .PublishDate.Format "2006" ) )
		( eq ( $.Scratch.Get "pagecount" ) 1 ) }}
<h2 class="mt-6 font-mono font-bold text-2xl">
  {{ .PublishDate.Format "2006" }}
</h2>
{{ end }} {{ $.Scratch.Set "pubDate" ( .PublishDate.Format "2006" ) }}

<article>
  <header class="flex justify-between">
    <h3 class="post-title font-medium font-mono">
      <a class="underline" href="{{ .RelPermalink }}">{{ .Title }}</a>
    </h3>
    <time
      class="text-xs text-left font-mono font-bold uppercase"
      datetime="{{ .PublishDate }}"
      pubdate
      >{{ .PublishDate.Format "02 Jan" }}</time
    >
  </header>
</article>

{{ end }} {{ if gt $paginate.TotalPages 1 }}
<nav>
  {{ if $paginate.HasPrev }}<a href="{{ $paginate.Prev.RelPermalnk }}"
    >&larr; Newer</a
  >{{ end }} {{ if and $paginate.HasPrev $paginate.HasNext }}&nbsp;/&nbsp;{{ end
  }} {{ if $paginate.HasNext }}<a href="{{ $paginate.Next.RelPermalnk }}"
    >Older &rarr;</a
  >{{ end }}
</nav>
{{ end }} {{ partial "footer.html" . }}
