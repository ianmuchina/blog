<!--
  Renders images from a tweet object
  Size values:
    `:thumb`
    `:small`
    `:medium`
    `:large`
    `:orig`

  TODO: Custom quality based on above.

 TODO params loading:
    size: {small, medium, large, original}
    backup: {true, false, }
-->

{{ with .ctx.photos }}
  {{ $count := len . }}
  <div class="gallery gallery-{{- $count -}}">
    {{ range . }}
      {{ $src := printf "%s:medium" .url }}
      
      {{/* Self host  Image */}}
      {{/*  a. GET Image from twitter cdn  */}}
      {{ $img := resources.GetRemote .url }}
      {{/*  b. Change Image source if there are no errors */}}
      {{/*  TODO: Resize and use picture element */}}
      {{ if not $img.Err }}
        {{ $src = $img.RelPermalink }}
      {{ end }}

      <img
        src="{{ $src }}"
        {{ if eq 1 $count }}
        width="{{ .width }}"
        height="{{ .height }}"
        {{ end }}
        {{ if .accessibilityLabel }}
        alt='{{.accessibilityLabel}}'
        {{ else }}
        alt=""
        {{ end }}
      />
    {{ end }}
  </div>
{{ end }}