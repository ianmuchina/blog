{{ $id := (.Get "id") }}

{{ $mode := "focus" }}

{{ if ne (.Get "mode") "" }}
  {{ $mode = (.Get "mode") }}
{{ end }}

{{ if eq (.Get "version") "2022" }}
  <!-- Older Twitter -->
  {{ with getJSON "https://cdn.syndication.twimg.com/tweet?id=" $id }}
    {{ partial "tweet/tweet" (dict "ctx" . "data" $.Site.Data "mode" $mode) }}
  {{ end }}
{{ else }} 
  <!-- Musk Twitter API -->
  {{ with getJSON "https://cdn.syndication.twimg.com/tweet-result?id=" $id }}
    {{ partial "tweet/tweet" (dict "ctx" . "data" $.Site.Data "mode" $mode) }}
  {{ end }}
{{ end }}